# Enable mod_rewrite
RewriteEngine On

# ----------------------------------------------------
# Force HTTPS
# ----------------------------------------------------
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ----------------------------------------------------
# Redirect root (/) and /index to /home
# ----------------------------------------------------
RewriteRule ^$ /home [R=301,L]
RewriteRule ^index/?$ /home [R=301,L]

# ----------------------------------------------------
# Remove trailing slashes (optional but clean)
# ----------------------------------------------------
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]

# ----------------------------------------------------
# Deny access to hidden files (.env, .git, etc.)
# ----------------------------------------------------
RedirectMatch 403 /\..*$

# Prevent directory listing
Options -Indexes

# ----------------------------------------------------
# Route all non-file/non-dir URLs to index.php
# ----------------------------------------------------
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?page=$1 [QSA,L]
